
> task_manager@1.0.0 test
> mocha test/**/*.test.js --exit



  Auth API
Database Connected!
Socket.IO Redis adapter connected
    ✔ should register a new user (485ms)
    ✔ should login an existing user (403ms)
    ✔ should return current user profile
    ✔ should fail to login with wrong password (407ms)

  Tasks API
    1) should create a new task
    2) should get all tasks
Update Task Failed: 500 {
  message: 'Cast to ObjectId failed for value "undefined" (type string) at path "_id" for model "tasks"',
  stack: 'CastError: Cast to ObjectId failed for value "undefined" (type string) at path "_id" for model "tasks"\n' +
    '    at ObjectId.cast (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n' +
    '    at SchemaType.applySetters (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n' +
    '    at SchemaType.castForQuery (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n' +
    '    at cast (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\cast.js:375:32)\n' +
    '    at Query.cast (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\query.js:4909:12)\n' +
    '    at Query._castConditions (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\query.js:2232:10)\n' +
    '    at model.Query._findOne (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\query.js:2518:8)\n' +
    '    at model.Query.exec (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\query.js:4429:28)\n' +
    '    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at async file:///C:/Users/Hanu/Desktop/taskmanagerdev/controllers/task.js:73:28\n' +
    '    at async file:///C:/Users/Hanu/Desktop/taskmanagerdev/middlewares/asyncWrapper.js:4:13'
}
    3) should update a task
Delete Task Failed: 500 {
  message: 'Cast to ObjectId failed for value "undefined" (type string) at path "_id" for model "tasks"',
  stack: 'CastError: Cast to ObjectId failed for value "undefined" (type string) at path "_id" for model "tasks"\n' +
    '    at ObjectId.cast (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n' +
    '    at SchemaType.applySetters (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n' +
    '    at SchemaType.castForQuery (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n' +
    '    at cast (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\cast.js:375:32)\n' +
    '    at Query.cast (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\query.js:4909:12)\n' +
    '    at Query._castConditions (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\query.js:2232:10)\n' +
    '    at model.Query._findOne (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\query.js:2518:8)\n' +
    '    at model.Query.exec (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\query.js:4429:28)\n' +
    '    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at async file:///C:/Users/Hanu/Desktop/taskmanagerdev/controllers/task.js:162:28\n' +
    '    at async file:///C:/Users/Hanu/Desktop/taskmanagerdev/middlewares/asyncWrapper.js:4:13'
}
    4) should delete a task
Get Deleted Task Failed (Expected 404): 500 {
  message: 'Cast to ObjectId failed for value "undefined" (type string) at path "_id" for model "tasks"',
  stack: 'CastError: Cast to ObjectId failed for value "undefined" (type string) at path "_id" for model "tasks"\n' +
    '    at ObjectId.cast (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\schema\\objectid.js:250:11)\n' +
    '    at SchemaType.applySetters (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\schematype.js:1219:12)\n' +
    '    at SchemaType.castForQuery (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\schematype.js:1633:15)\n' +
    '    at cast (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\cast.js:375:32)\n' +
    '    at Query.cast (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\query.js:4909:12)\n' +
    '    at Query._castConditions (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\query.js:2232:10)\n' +
    '    at model.Query._findOne (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\query.js:2518:8)\n' +
    '    at model.Query.exec (C:\\Users\\Hanu\\Desktop\\taskmanagerdev\\node_modules\\mongoose\\lib\\query.js:4429:28)\n' +
    '    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
    '    at async file:///C:/Users/Hanu/Desktop/taskmanagerdev/controllers/task.js:57:28\n' +
    '    at async file:///C:/Users/Hanu/Desktop/taskmanagerdev/middlewares/asyncWrapper.js:4:13'
}
    5) should fail to get deleted task


  4 passing (2s)
  5 failing

  1) Tasks API
       should create a new task:
     AssertionError: Target cannot be null or undefined.
      at Context.<anonymous> (file:///C:/Users/Hanu/Desktop/taskmanagerdev/test/tasks.test.js:38:39)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  2) Tasks API
       should get all tasks:
     AssertionError: expected undefined not to be undefined
      at Context.<anonymous> (file:///C:/Users/Hanu/Desktop/taskmanagerdev/test/tasks.test.js:51:32)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  3) Tasks API
       should update a task:

      AssertionError: expected 500 to equal 200
      + expected - actual

      -500
      +200
      
      at Context.<anonymous> (file:///C:/Users/Hanu/Desktop/taskmanagerdev/test/tasks.test.js:64:31)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  4) Tasks API
       should delete a task:

      AssertionError: expected 500 to equal 200
      + expected - actual

      -500
      +200
      
      at Context.<anonymous> (file:///C:/Users/Hanu/Desktop/taskmanagerdev/test/tasks.test.js:75:31)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  5) Tasks API
       should fail to get deleted task:

      AssertionError: expected 500 to equal 404
      + expected - actual

      -500
      +404
      
      at Context.<anonymous> (file:///C:/Users/Hanu/Desktop/taskmanagerdev/test/tasks.test.js:84:31)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)



